import{c as R,a5 as Y,a6 as U,r as n,j as e,a7 as L,d as p,a8 as F,a9 as O,aa as ze,ab as q,ac as $,ad as J,o as Ie,ae as K,k as Z,af as He,p as Be,ag as Ve,ah as ee,a3 as Ge,a4 as Qe,G as We,C as Xe,B as N,a as Ye,ai as Ue,aj as Je,ak as Ke,b as Ze,al as ea,X as P,_ as aa,am as sa,an as ta,ao as ra,ap as M,aq as W,ar as oa}from"./index-Brp40DcI.js";import{T as la,b as na,c as _}from"./tabs-C4U-Suib.js";import{B as ia}from"./badge-BUDzmVdF.js";import{I as A}from"./input-C-5VRavq.js";import{L as b,T as ca}from"./textarea-U7hsADPP.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=R("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=R("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=R("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=R("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=R("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=R("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ha=Y,xa=U,fa=J,ae=n.forwardRef(({className:a,...s},r)=>e.jsx(L,{ref:r,className:p("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s}));ae.displayName=L.displayName;const se=n.forwardRef(({className:a,children:s,...r},o)=>e.jsxs(fa,{children:[e.jsx(ae,{}),e.jsxs(F,{ref:o,className:p("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r,children:[s,e.jsxs(O,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));se.displayName=F.displayName;const te=({className:a,...s})=>e.jsx("div",{className:p("flex flex-col space-y-1.5 text-center sm:text-left",a),...s});te.displayName="DialogHeader";const re=({className:a,...s})=>e.jsx("div",{className:p("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s});re.displayName="DialogFooter";const oe=n.forwardRef(({className:a,...s},r)=>e.jsx(q,{ref:r,className:p("text-lg font-semibold leading-none tracking-tight",a),...s}));oe.displayName=q.displayName;const le=n.forwardRef(({className:a,...s},r)=>e.jsx($,{ref:r,className:p("text-sm text-muted-foreground",a),...s}));le.displayName=$.displayName;var ne="AlertDialog",[va,Oa]=Ie(ne,[K]),v=K(),ie=a=>{const{__scopeAlertDialog:s,...r}=a,o=v(s);return e.jsx(Y,{...o,...r,modal:!0})};ie.displayName=ne;var ja="AlertDialogTrigger",ce=n.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...o}=a,c=v(r);return e.jsx(U,{...c,...o,ref:s})});ce.displayName=ja;var ya="AlertDialogPortal",de=a=>{const{__scopeAlertDialog:s,...r}=a,o=v(s);return e.jsx(J,{...o,...r})};de.displayName=ya;var Na="AlertDialogOverlay",me=n.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...o}=a,c=v(r);return e.jsx(L,{...c,...o,ref:s})});me.displayName=Na;var w="AlertDialogContent",[Da,Ca]=va(w),pe=n.forwardRef((a,s)=>{const{__scopeAlertDialog:r,children:o,...c}=a,D=v(r),u=n.useRef(null),C=Z(s,u),k=n.useRef(null);return e.jsx(He,{contentName:w,titleName:ue,docsSlug:"alert-dialog",children:e.jsx(Da,{scope:r,cancelRef:k,children:e.jsxs(F,{role:"alertdialog",...D,...c,ref:C,onOpenAutoFocus:Be(c.onOpenAutoFocus,j=>{var x;j.preventDefault(),(x=k.current)==null||x.focus({preventScroll:!0})}),onPointerDownOutside:j=>j.preventDefault(),onInteractOutside:j=>j.preventDefault(),children:[e.jsx(Ve,{children:o}),e.jsx(ba,{contentRef:u})]})})})});pe.displayName=w;var ue="AlertDialogTitle",ge=n.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...o}=a,c=v(r);return e.jsx(q,{...c,...o,ref:s})});ge.displayName=ue;var he="AlertDialogDescription",xe=n.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...o}=a,c=v(r);return e.jsx($,{...c,...o,ref:s})});xe.displayName=he;var Aa="AlertDialogAction",fe=n.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...o}=a,c=v(r);return e.jsx(O,{...c,...o,ref:s})});fe.displayName=Aa;var ve="AlertDialogCancel",je=n.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...o}=a,{cancelRef:c}=Ca(ve,r),D=v(r),u=Z(s,c);return e.jsx(O,{...D,...o,ref:u})});je.displayName=ve;var ba=({contentRef:a})=>{const s=`\`${w}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${w}\` by passing a \`${he}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${w}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return n.useEffect(()=>{var o;document.getElementById((o=a.current)==null?void 0:o.getAttribute("aria-describedby"))||console.warn(s)},[s,a]),null},wa=ie,Ra=ce,ka=de,ye=me,Ne=pe,De=fe,Ce=je,Ae=ge,be=xe;const Ea=wa,Ta=Ra,Sa=ka,we=n.forwardRef(({className:a,...s},r)=>e.jsx(ye,{className:p("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:r}));we.displayName=ye.displayName;const Re=n.forwardRef(({className:a,...s},r)=>e.jsxs(Sa,{children:[e.jsx(we,{}),e.jsx(Ne,{ref:r,className:p("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s})]}));Re.displayName=Ne.displayName;const ke=({className:a,...s})=>e.jsx("div",{className:p("flex flex-col space-y-2 text-center sm:text-left",a),...s});ke.displayName="AlertDialogHeader";const Ee=({className:a,...s})=>e.jsx("div",{className:p("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s});Ee.displayName="AlertDialogFooter";const Te=n.forwardRef(({className:a,...s},r)=>e.jsx(Ae,{ref:r,className:p("text-lg font-semibold",a),...s}));Te.displayName=Ae.displayName;const Se=n.forwardRef(({className:a,...s},r)=>e.jsx(be,{ref:r,className:p("text-sm text-muted-foreground",a),...s}));Se.displayName=be.displayName;const Pe=n.forwardRef(({className:a,...s},r)=>e.jsx(De,{ref:r,className:p(ee(),a),...s}));Pe.displayName=De.displayName;const Me=n.forwardRef(({className:a,...s},r)=>e.jsx(Ce,{ref:r,className:p(ee({variant:"outline"}),"mt-2 sm:mt-0",a),...s}));Me.displayName=Ce.displayName;function qa(){const{user:a,logout:s}=Ge(),[,r]=Qe(),{toast:o}=We(),[c,D]=n.useState(!0),[u,C]=n.useState([]),[k,j]=n.useState([]),[x,_e]=n.useState("pending"),[E,Le]=n.useState(""),[i,g]=n.useState(null),[y,T]=n.useState(null);n.useEffect(()=>{a||r("/admin")},[a,r]);const z=async()=>{D(!0);try{const t=P(),l=aa(t,"contact-requests"),h=sa(l,ta("createdAt","desc")),m=await ra(h),d=[];m.forEach(f=>{const S=f.data();d.push({id:f.id,...S})}),C(d),I(d,x,E)}catch(t){console.error("Error fetching contact requests:",t),o({title:"Error",description:"Failed to load contact requests. Please try again.",variant:"destructive"})}finally{D(!1)}};n.useEffect(()=>{a&&z()},[a]);const I=(t,l,h)=>{let m=t;if(l==="pending"?m=m.filter(d=>!d.completed):l==="completed"&&(m=m.filter(d=>d.completed)),h){const d=h.toLowerCase();m=m.filter(f=>{var S,H,B,V,G,Q;return((S=f.name)==null?void 0:S.toLowerCase().includes(d))||((H=f.email)==null?void 0:H.toLowerCase().includes(d))||((B=f.phone)==null?void 0:B.toLowerCase().includes(d))||((V=f.message)==null?void 0:V.toLowerCase().includes(d))||((G=f.service)==null?void 0:G.toLowerCase().includes(d))||((Q=f.country)==null?void 0:Q.toLowerCase().includes(d))})}j(m)};n.useEffect(()=>{I(u,x,E)},[x,E,u]);const Fe=async t=>{try{const l=P(),h=M(l,"contact-requests",t.id);await W(h,{completed:!t.completed});const m=u.map(d=>d.id===t.id?{...d,completed:!t.completed}:d);C(m),o({title:t.completed?"Marked as pending":"Marked as completed",description:`Request from ${t.name} has been updated.`})}catch(l){console.error("Error updating contact request:",l),o({title:"Error",description:"Failed to update request status. Please try again.",variant:"destructive"})}},Oe=async()=>{if(i)try{const t=P(),l=M(t,"contact-requests",i.id);await W(l,{name:i.name,email:i.email,phone:i.phone||"",service:i.service||"",message:i.message,country:i.country||""});const h=u.map(m=>m.id===i.id?i:m);C(h),o({title:"Request updated",description:`Request from ${i.name} has been updated.`}),g(null)}catch(t){console.error("Error updating contact request:",t),o({title:"Error",description:"Failed to update request. Please try again.",variant:"destructive"})}},qe=async()=>{if(y)try{const t=P(),l=M(t,"contact-requests",y.id);await oa(l);const h=u.filter(m=>m.id!==y.id);C(h),o({title:"Request deleted",description:`Request from ${y.name} has been deleted.`}),T(null)}catch(t){console.error("Error deleting contact request:",t),o({title:"Error",description:"Failed to delete request. Please try again.",variant:"destructive"})}},$e=t=>{const l=t.toDate();return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(l)};return a?e.jsx(Xe,{children:e.jsxs("div",{className:"py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),e.jsx(N,{variant:"outline",onClick:()=>s().then(()=>r("/admin")),children:"Logout"})]}),e.jsxs("div",{className:"bg-card rounded-lg shadow-md p-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Contact Requests"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage consultation requests from potential clients"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full md:w-auto",children:[e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx(pa,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(A,{placeholder:"Search requests...",className:"pl-8",value:E,onChange:t=>Le(t.target.value)})]}),e.jsxs(N,{variant:"outline",onClick:z,disabled:c,children:[c?e.jsx(X,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(ma,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),e.jsxs(la,{defaultValue:"pending",value:x,onValueChange:_e,children:[e.jsxs(na,{className:"mb-6",children:[e.jsx(_,{value:"pending",children:"Pending"}),e.jsx(_,{value:"completed",children:"Completed"}),e.jsx(_,{value:"all",children:"All Requests"})]}),c?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(X,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-2 text-lg",children:"Loading requests..."})]}):k.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsxs("p",{className:"text-lg",children:["No ",x!=="all"?x:""," requests found"]}),E&&e.jsx("p",{className:"mt-2",children:"Try adjusting your search query"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(t=>e.jsxs(Ye,{className:t.completed?"border-green-200 bg-green-50 dark:bg-green-950/20 dark:border-green-800":"",children:[e.jsx(Ue,{className:"pb-2",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Je,{children:t.name}),e.jsx(Ke,{className:"mt-1",children:t.email})]}),t.completed&&e.jsxs(ia,{variant:"outline",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100 border-green-200 dark:border-green-800",children:[e.jsx(da,{className:"h-3 w-3 mr-1"}),"Completed"]})]})}),e.jsx(Ze,{children:e.jsxs("div",{className:"space-y-2 mt-2",children:[t.phone&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Phone:"}),e.jsx("span",{className:"text-sm ml-2",children:t.phone})]}),t.country&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Country:"}),e.jsx("span",{className:"text-sm ml-2",children:t.country})]}),t.service&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Service:"}),e.jsx("span",{className:"text-sm ml-2",children:t.service})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Date:"}),e.jsx("span",{className:"text-sm ml-2",children:$e(t.createdAt)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Message:"}),e.jsx("p",{className:"text-sm mt-1 whitespace-pre-wrap",children:t.message})]})]})}),e.jsxs(ea,{className:"flex justify-between pt-2",children:[e.jsx(N,{variant:t.completed?"outline":"default",size:"sm",onClick:()=>Fe(t),children:t.completed?"Mark as Pending":"Mark as Completed"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ha,{open:(i==null?void 0:i.id)===t.id,onOpenChange:l=>!l&&g(null),children:[e.jsx(xa,{asChild:!0,children:e.jsx(N,{variant:"outline",size:"icon",onClick:()=>g({...t}),children:e.jsx(ua,{className:"h-4 w-4"})})}),e.jsxs(se,{children:[e.jsxs(te,{children:[e.jsx(oe,{children:"Edit Contact Request"}),e.jsx(le,{children:"Make changes to the contact request details below."})]}),i&&e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(b,{htmlFor:"name",className:"text-right",children:"Name"}),e.jsx(A,{id:"name",value:i.name,onChange:l=>g({...i,name:l.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(b,{htmlFor:"email",className:"text-right",children:"Email"}),e.jsx(A,{id:"email",type:"email",value:i.email,onChange:l=>g({...i,email:l.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(b,{htmlFor:"phone",className:"text-right",children:"Phone"}),e.jsx(A,{id:"phone",value:i.phone||"",onChange:l=>g({...i,phone:l.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(b,{htmlFor:"country",className:"text-right",children:"Country"}),e.jsx(A,{id:"country",value:i.country||"",onChange:l=>g({...i,country:l.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(b,{htmlFor:"service",className:"text-right",children:"Service"}),e.jsx(A,{id:"service",value:i.service||"",onChange:l=>g({...i,service:l.target.value}),className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(b,{htmlFor:"message",className:"text-right",children:"Message"}),e.jsx(ca,{id:"message",value:i.message,onChange:l=>g({...i,message:l.target.value}),className:"col-span-3",rows:4})]})]}),e.jsxs(re,{children:[e.jsx(N,{variant:"outline",onClick:()=>g(null),children:"Cancel"}),e.jsx(N,{onClick:Oe,children:"Save changes"})]})]})]}),e.jsxs(Ea,{open:(y==null?void 0:y.id)===t.id,onOpenChange:l=>!l&&T(null),children:[e.jsx(Ta,{asChild:!0,children:e.jsx(N,{variant:"outline",size:"icon",onClick:()=>T(t),children:e.jsx(ga,{className:"h-4 w-4 text-red-500"})})}),e.jsxs(Re,{children:[e.jsxs(ke,{children:[e.jsx(Te,{children:"Are you sure?"}),e.jsxs(Se,{children:["This action cannot be undone. This will permanently delete the contact request from ",t.name,"."]})]}),e.jsxs(Ee,{children:[e.jsx(Me,{onClick:()=>T(null),children:"Cancel"}),e.jsx(Pe,{onClick:qe,className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})]})]})]})]},t.id))})]})]})]})}):null}export{qa as default};
